@import 'tailwindcss';
@plugin "@tailwindcss/typography";
@config "./tailwind.config.js";

/* Local font faces */
@font-face {
  font-family: "Space Grotesk";
  src: url("/fonts/Grotesk-03Regular.woff2") format("woff2");
  font-weight: 400 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-Regular.otf.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-It.otf.woff2") format("woff2");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-Light.otf.woff2") format("woff2");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-LightIt.otf.woff2") format("woff2");
  font-weight: 300;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-Bold.otf.woff2") format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Source Serif 4";
  src: url("/fonts/SourceSerif4-BoldIt.otf.woff2") format("woff2");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* ─── raw color values (light mode) ─────────────────────────────────── */
:root {
  --bg-color: 250 249 247;
  --foreground-color: 44 44 44;
  --muted-color: 107 107 107;
  --divider-color: 226 224 220;
  --surface-color: 240 239 237;
  --overlay-color: 31 31 36;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: 26 26 31;
    --foreground-color: 232 230 227;
    --muted-color: 154 154 154;
    --divider-color: 45 45 50;
    --surface-color: 42 42 48;
    --overlay-color: 31 31 36;
  }
}

/* ─── theme-aware color definitions ─────────────────────────────────── */
@theme inline {
  --color-bg: rgb(var(--bg-color));
  --color-foreground: rgb(var(--foreground-color));
  --color-muted: rgb(var(--muted-color));
  --color-divider: rgb(var(--divider-color));
  --color-surface: rgb(var(--surface-color));
  --color-overlay: rgb(var(--overlay-color));
}

@theme {
  --font-serif: "Source Serif 4", "Source Serif Pro", Georgia, serif;
  --font-sans: system-ui, -apple-system, sans-serif;
  --font-grotesk: "Space Grotesk", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", ui-monospace, monospace;
}

@utility text-link {
  @apply text-blue-900 dark:text-blue-200 hover:underline;
}

html {
  @apply font-serif;
}

body {
  @apply bg-bg text-foreground leading-relaxed;
  font-size: 1.05rem;
}

h1, h2, h3, h4, h5, h6 {
  @apply font-sans font-semibold tracking-tight;
}

/* Prose content */
.prose {
  @apply max-w-none text-foreground prose-a:text-link prose-ul:list-disc prose-ul:pl-6 prose-ul:my-4 prose-ol:list-decimal prose-ol:pl-6 prose-ol:my-4 prose-li:my-1;
}

/* Site header */
.site-header {
  @apply border-b border-divider;
}

.wordmark {
  @apply font-grotesk font-bold text-3xl tracking-tight text-foreground text-link no-underline;
}

.nav-link {
  @apply font-sans text-sm text-muted transition-colors duration-150;
}

.nav-link:hover {
  @apply text-foreground;
}

/* Code blocks */
pre {
  @apply px-4 py-2 overflow-x-auto w-0 min-w-full rounded-md font-mono bg-surface border border-divider;
}

code:not(pre *) {
  @apply font-mono text-sm bg-surface px-1.5 py-0.5 rounded;
}

/* Post list */
.post-item {
  @apply block transition-colors duration-150 no-underline;
  padding: 0rem 0.25rem;
  margin: 0 -0.25rem;
}

.post-item:hover {
  background-color: rgb(var(--foreground-color) / 0.03);
}

.post-title {
  @apply font-grotesk text-xl tracking-wide text-foreground;
}

.post-date {
  @apply font-sans text-sm text-muted whitespace-nowrap;
}

.post-description {
  @apply text-sm text-muted mt-1 leading-normal;
}

/* Footer */
.site-footer {
  @apply border-t border-divider text-sm text-muted;
}

.site-footer a {
  @apply text-muted text-link transition-colors duration-150;
}

/* Article header */
.article-title {
  @apply font-grotesk text-3xl font-bold leading-tight mb-2;
  letter-spacing: -0.03em;
}

.article-meta {
  @apply font-sans text-sm text-muted;
}

/* Section headers */
.section-title {
  @apply font-sans text-sm font-semibold uppercase tracking-widest text-muted mb-4;
}

.math {
  filter: invert(0);
  display: inline-block;
}

/* math formatting */
.block-math {
  @apply flex justify-center min-w-full w-0 overflow-x-auto my-0;
}

@media (prefers-color-scheme: dark) {
  .math {
    filter: invert(1);
  }
}
